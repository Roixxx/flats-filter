"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var l=e[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var resultContainer=document.querySelector(".result"),flatsContainer=document.getElementById("flats-container"),showFlatsBtn=document.getElementById("showFlatsBtn"),filterBtnsArr=document.querySelectorAll(".filter__btn"),resetFiltersBtn=document.getElementById("resetFiltersBtn"),filterFromToInputArr=document.querySelectorAll(".filter__from-to-input-inner"),noResultSection=document.querySelector(".no-result"),aboutFlatSection=document.querySelectorAll(".about-flat"),flatsFoundTitle=document.getElementById("flatsFoundTitle"),Flats=function(){function t(){_classCallCheck(this,t),this.flats=""}return _createClass(t,[{key:"getFlats",value:function(){var t=this;return new Promise((function(e,n){fetch("./assets/data/flats.json").then((function(t){return t.json()})).then((function(e){return t.flats=e.flats})).then((function(){return e()})).catch((function(t){return n(t)}))}))}},{key:"countTotalFlats",value:function(){this.flats.length}},{key:"filterFlats",value:function(){var t,e=_toConsumableArray(document.querySelectorAll(".filter__btn.active")).map((function(t){return t.dataset.value})),n=document.querySelector("#priceMin").value,l=document.querySelector("#priceMax").value,a=document.querySelector("#spaceMin").value,r=document.querySelector("#spaceMax").value;return t=flats.flats.filter((function(t){return(!n||n<=t.price)&&(!l||l>=t.price)&&(!a||a<=t.space)&&(!r||r>=t.space)&&(e.includes(t.rooms)||null==e[0])})),showFlatsBtn.innerHTML="Показать ".concat(t.length," квартир"),setMinMaxPlaceholders(t),t}},{key:"renderFlats",value:function(t){var e="";t.forEach((function(t){var n=t.rooms,l=t.floor,a=t.term,r=t.space,s=t.price,c=t.finishing,o=t.building;e+='\n\t\t\t\t<tr class="result__row">\n\t\t\t\t\t<td class="result__cell">'.concat(n,'</td>\n\t\t\t\t\t<td class="result__cell">').concat(l,'</td>\n\t\t\t\t\t<td class="result__cell">').concat(a,'</td>\n\t\t\t\t\t<td class="result__cell">').concat(r,' м²</td>\n\t\t\t\t\t<td class="result__cell result__price">').concat(numberWithSpaces(s),' ₽</td>\n\t\t\t\t\t<td class="result__cell result__buttons-cell">\n\t\t\t\t\t\t<button class="result__favour"><img src="./assets/images/heart-icon.svg" alt="favourites"></button>\n\t\t\t\t\t\t<button class="result__show-item"><img src="./assets/images/arrow-icon.svg" alt="arrow"></button>\n\t\t\t\t\t</td>\n\n\t\t\t\t\t').concat(aboutFlatHtmlStart,'\n\n\t\t\t\t\t<p class="about-flat__title">').concat(n,'</p>\n\t\t\t\t\t<p class="about-flat__price">').concat(numberWithSpaces(s),' ₽</p>\n\t\t\t\t\t<p class="about-flat__space">').concat(r,' м²</p>\n\n\t\t\t\t\t<div class="about-flat__middle-row">\n\t\t\t\t\t\t<div class="about-flat__col">\n\t\t\t\t\t\t\t<p class="about-flat__property">Цена за м²</p>\n\t\t\t\t\t\t\t<p>').concat(numberWithSpaces(Math.round(s/r)),' ₽</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="about-flat__col">\n\t\t\t\t\t\t\t<p class="about-flat__property">Отделка</p>\n\t\t\t\t\t\t\t<p>').concat(c,'</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="about-flat__col">\n\t\t\t\t\t\t\t<p class="about-flat__property">Корпус</p>\n\t\t\t\t\t\t\t<p>').concat(o,"</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t").concat(aboutFlatHtmlEnd,"\n\t\t\t\t</tr>\n\t\t\t")})),flatsContainer.innerHTML='<tr class="result__row">\n\t\t\t\t<th class="result__cell">Тип</th>\n\t\t\t\t<th class="result__cell">Этаж</th>\n\t\t\t\t<th class="result__cell">Срок сдачи</th>\n\t\t\t\t<th class="result__cell">Площадь</th>\n\t\t\t\t<th class="result__cell">Стоимость</th>\n\t\t\t\t<th class="result__cell result__buttons-cell"></th>\n\t\t\t</tr>'+e,flatsFoundTitle.innerHTML="Найдено ".concat(t.length," квартир"),setAboutItemToggler(),setMinMaxPlaceholders(t)}},{key:"renderNoFlats",value:function(){noResultSection.classList.add("active"),resultContainer.classList.add("active")}}]),t}(),flats=new Flats;function setAboutItemToggler(){document.querySelectorAll(".result__show-item").forEach((function(t){t.addEventListener("click",(function(){var e=t.parentElement.parentElement,n=e.querySelector(".about-flat");t.classList.toggle("active"),e.classList.toggle("active"),n.classList.toggle("active")}))}))}function setMinMaxPlaceholders(t){if(0==t.length)return!1;var e=t[0].price,n=t[0].price,l=t[0].space,a=t[0].space;t.forEach((function(t){t.price<e&&(e=t.price),t.price>n&&(n=t.price),t.space<l&&(l=t.space),t.space>a&&(a=t.space)})),priceMin.placeholder=numberWithSpaces(e),priceMax.placeholder=numberWithSpaces(n),spaceMin.placeholder=l,spaceMax.placeholder=a}function numberWithSpaces(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}flats.getFlats().then((function(){flats.renderFlats(flats.flats),flatsFoundTitle.innerHTML="Найдено ".concat(flats.flats.length," квартир"),showFlatsBtn.innerHTML="Показать ".concat(flats.flats.length," квартир")})),filterBtnsArr.forEach((function(t){t.addEventListener("click",(function(t){t.target.classList.toggle("active"),flats.filterFlats(t.target)}))})),filterFromToInputArr.forEach((function(t){t.addEventListener("keyup",flats.filterFlats)})),showFlatsBtn.onclick=function(){var t=flats.filterFlats();t.length>0?(flats.renderFlats(t),noResultSection.classList.remove("active"),resultContainer.classList.remove("active")):flats.renderNoFlats()},resetFiltersBtn.onclick=function(){noResultSection.classList.remove("active"),resultContainer.classList.remove("active"),filterBtnsArr.forEach((function(t){t.classList.remove("active")})),filterFromToInputArr.forEach((function(t){t.value=""})),flats.renderFlats(flats.filterFlats())};
"use strict";var aboutFlatHtmlStart='\n\n<td class="about-flat">\n\n\t<div class="about-flat__lables-holder">\n\t\t<div class="about-flat__lable green-lable">Скидка 2% <img src="./assets/images/green-label.svg" alt="?"></div>\n\t\t<div class="about-flat__lable orange-lable">Материнский капитал<img src="./assets/images/orange-label.svg" alt="?"></div>\n\t\t<div class="about-flat__lable violet-lable">Ипотека от 0,1 %</div>\n\t</div>\n\n\t<div class="about-flat__main">\n\t\t<div class="about-flat__img-holder">\n\t\t\t<img src="./assets/images/flat.jpg" alt="flat">\n\t\t</div>\n\n\t\t<div class="about-flat__info-holder">\n',aboutFlatHtmlEnd='\n\n\t\t\t<a class="about-flat__link" href="#">Подробное описание<svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t<path fill-rule="evenodd" clip-rule="evenodd"\n\t\t\t\t\td="M0.292893 0.292893C0.683417 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L5.70711 4.29289C6.09763 4.68342 6.09763 5.31658 5.70711 5.70711L1.70711 9.70711C1.31658 10.0976 0.683417 10.0976 0.292893 9.70711C-0.0976311 9.31658 -0.0976311 8.68342 0.292893 8.29289L3.58579 5L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683417 0.292893 0.292893Z"\n\t\t\t\t\tfill="#367EE7" />\n\t\t\t</svg></a>\n\t\t</div>\n\t</div>\n\n\t<div class="feedback">\n\t\t<p class="feedback__title">Хотите записаться на просмотр объекта?</p>\n\t\t<p>Оставьте свои данные, и мы организуем просмотр в удобное для вас время.</p>\n\n\t\t<form class="feedback__form" action="#" method="post">\n\t\t\t<div>\n\t\t\t\t<label class="feedback__label" for="name">Имя</label>\n\t\t\t\t<input class="feedback__input" placeholder="Введите имя" type="text" name="name" id="name">\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<label class="feedback__label" for="tel">Телефон</label>\n\t\t\t\t<input class="feedback__input" placeholder="+7" type="text" name="tel" id="tel">\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<input class="feedback__btn" type="submit" value="Оставить заявку">\n\t\t\t</div>\n\t\t</form>\n\n\t\t<p class="feedback__privacy">\n\t\t\tОставляя заявку вы соглашаетесь с <a href="#">политикой конфидециальности</a>\n\t\t</p>\n\t</div>\n\n</td>\n';
//# sourceMappingURL=app.min.js.map
